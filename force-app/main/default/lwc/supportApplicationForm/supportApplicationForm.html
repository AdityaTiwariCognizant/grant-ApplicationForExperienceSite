<template>
  
  <template if:true={searchApplication}>
    <div class="demo-only demo-only--sizing slds-grid slds-wrap">
      <div class="slds-size_2-of-8">
        <div class=" slds-var-m-around_x-small"></div>
      </div>
      <div class="slds-size_4-of-8">

      <lightning-card style="text-align: center;width:600px ">Enter your phone to check existing application
        <div >
        <lightning-input id="searchPhone" class="slds-var-p-left_medium slds-var-p-right_medium slds-var-p-bottom_medium" lable="Phone Number" style="text-align: left;" placeholder="2 digit country code followed by 10 digit valid phone number" required="true" pattern="[0-9]{2}[0-9]{10}" message-when-pattern-mismatch="Phone number must be in valid format" message-when-value-missing="Please enter a valid phone number"  value={searchPhoneKey} onchange={handlePhoneSearch}></lightning-input>

        <div class="demo-only demo-only--sizing slds-grid slds-wrap slds-var-p-left_x-small slds-var-p-right_x-small">

        <div class="slds-size_2-of-8">
          <lightning-button class="slds-var-p-left_x-small slds-var-p-top_small" label="Submit"  variant="brand" onclick={handlePhoneSearchSubmit} ></lightning-button>
        </div>
        <div class="slds-size_5-of-8"></div>
        <div class="slds-size_1-of-8">
          <lightning-button-icon icon-name="utility:adduser" label="Register"  variant="brand" alternative-text="Register" class="slds-m-left_xx-small" title="Register" onclick={handlecreateAppButtn}></lightning-button-icon>
        </div>
        </div>
      </div>
      </lightning-card>
    
    </div>
    <div class="slds-size_2-of-8">
      <div class="slds-m-around_x-small"></div>
    </div>
  </div>
  </template>

<template if:true={regretMessageFlag}>
  <div class="demo-only demo-only--sizing slds-grid slds-wrap">
    <div class="slds-size_2-of-8">
      <div class=" slds-var-m-around_x-small"></div>
    </div>
    
    <div class="slds-size_4-of-8">
      <lightning-card style="text-align: center;width:700px">
        
        <p class="slds-var-p-around_small">
          For New Application Please click Create Application button
        </p>

        <lightning-button class="slds-var-p-right_small" variant="Brand-outline" label="Back" onclick={handleBackBtn}></lightning-button>

        <lightning-button class="slds-var-p-left_small" label="Create Application" variant="brand" onclick={handlecreateAppButtn}></lightning-button>

      </lightning-card>

    </div>

    <div class="slds-size_2-of-8">
      <div class=" slds-var-m-around_x-small"></div>
    </div>
  </div>

</template>


<template if:true={showExistingApplication}>
  <div class="demo-only demo-only--sizing slds-grid slds-wrap">
    <div class="slds-size_2-of-8">
      <div class=" slds-var-m-around_x-small"></div>
    </div>
    <div class="slds-size_4-of-8">
      <lightning-card>
        <h3 style="text-align: center;">Existing Application Details</h3>
        <ul class="slds-var-p-around_small">
          <li class="slds-border_bottom">First Name: {existingApplication.FirstName}</li>
          <li class="slds-border_bottom">Last Name: {existingApplication.LastName}</li>
          <li class="slds-border_bottom">Phone Number: {existingApplication.Phone}</li>
          <li class="slds-border_bottom">Support Option: {existingApplication.SupportOption}</li>

        </ul>
        <template if:true={editMessage}>
        <p style="text-align: center;">If you wish to make changes click edit button</p>
        <div style=" display: flex;justify-content: center;" class="slds-var-p-top_x-small slds-grid slds-grid_vertical-align-center">
            <div class="slds-size_3-of-6">
              <lightning-button class="slds-float_left slds-var-p-left_small" variant="Brand-outline" label="Back" onclick={handleBackBtn}></lightning-button>
            </div>
            <div class="slds-size_3-of-6">
              <lightning-button class="slds-float_right slds-var-p-right_small" style="align-self: center;" variant="Brand" label="Edit" onclick={handleEditApplication}></lightning-button>
            </div>
          
        </div>
      </template>

      </lightning-card>
    </div>
    <div class="slds-size_2-of-8">
      <div class=" slds-var-m-around_x-small"></div>
    </div>

  </div>

</template>

  <template if:true={newApplication}>
    <div class="demo-only demo-only--sizing slds-grid slds-wrap">
        <div class="slds-size_2-of-8">
            <div class=" slds-var-m-around_x-small"></div>
          </div>
          <div class="slds-size_4-of-8">
            <div class="slds-box slds-box_x-small slds-m-around_x-small">
                <lightning-card class="card-class"  icon-name="standard-record">Support Application
                    <div class="slds-var-m-around_x-large">
                        <lightning-input label="First Name" style="text-align: left;" value={ApplicantDetails.First_Name} onchange={handleFirstName} placeholder="Enter first name without any special characters" required="true" message-when-value-missing="Please fill out this mandatory field"></lightning-input>
                        <lightning-input label="Last Name" style="text-align: left;" value={ApplicantDetails.Last_Name} onchange={handleLastName} placeholder="Enter last name without any special characters" required="true" message-when-value-missing="Please fill out this mandatory field"></lightning-input>
                        <lightning-input label="Phone Number" 
                                         style="text-align: left;" 
                                         value={ApplicantDetails.Phone} 
                                         onchange={handlePhone} 
                                         placeholder="2 Digit country code followed by 10 Digit valid phone number" 
                                         required="true" 
                                         pattern="[0-9]{2}[0-9]{10}"
                                         message-when-pattern-mismatch="Please only enter valid phone number"
                                         field-level-help="Please enter 2 digit country code followed by 10 digit valid phone number"
                                         message-when-value-missing="Please fill out this mandatory field"
                                         ></lightning-input>
                        <lightning-input label="Postal Code" style="text-align: left;" value={ApplicantDetails.Postal_Code} onchange={handlePostalCode} placeholder="6 Digit valid postal/zip code" pattern="[0-9]{6}" message-when-pattern-mismatch="Please only enter valid 6 digit postal code" required="true" field-level-help="Please enter only 6 digit postal code" message-when-value-missing="Please fill out this mandatory field"></lightning-input>
                        <lightning-input label="Monthly Income" 
                                         style="text-align: left;" 
                                         value={ApplicantDetails.Monthly_Income} 
                                         onchange={handleMonthlyIncome} 
                                         required="true" 
                                         type="number"
                                         min="0"
                                         max="1999"
                                         message-when-range-overflow="Monthly income must be below SGD 2000 to avail support"
                                         field-level-help="Please note that only person with monthly income lower than SGD 2000 are eligible for support"
                                         message-when-value-missing="Please fill out this mandatory field"
                                         class={errorClass}
                                         placeholder="Enter your monthly income, must be below SGD 2000 to avail support"
                                         
                                         > 
                        </lightning-input>
                       
                        <lightning-combobox 
            
                            name="Support Options" 
            
                            label="Support Options"

                            style="text-align: left;"
            
                            value={selectedPicklistValue} 
            
                            onchange={handleSupportOptionChange} 
            
                            options={options}
                            
                            required="true"

                            field-level-help="These are the grant support option plans available, please select a suitable option"

                            message-when-value-missing="Please fill out this mandatory field"
                            
                            >
            
                    </lightning-combobox>
            
                    </div>
                    <lightning-button class="slds-var-p-right_x-small" label="Cancel" variant="brand-outline" onclick={handleNewAppCancelBtn}></lightning-button>

                    <lightning-button class="slds-var-p-left_x-small" label="Submit" variant="brand" onclick={handleSubmit} disabled={buttonFlag}></lightning-button>
                </lightning-card>
            </div>
          </div>
          <div class="slds-size_2-of-8">
            <div class="slds-m-around_x-small"></div>
          </div>
    </div>
  </template>
</template>